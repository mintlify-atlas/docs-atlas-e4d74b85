---
title: "Sessions API"
description: "List, retrieve, and delete conversation sessions"
---

## Overview

Sessions store conversation history between the user and the agent. Each session has a unique key and includes all messages, timestamps, and metadata.

The Sessions API provides CRUD operations for managing these sessions.

## GET /api/v1/sessions

List all session keys with metadata.

### Request

```bash
curl -X GET http://127.0.0.1:8080/api/v1/sessions \
  -H "Authorization: Bearer YOUR_TOKEN"
```

No parameters required.

### Response

<ResponseField name="sessions" type="array">
  Array of session key strings.
</ResponseField>

<ResponseField name="count" type="integer">
  Total number of sessions.
</ResponseField>

### Example Response

```json
{
  "sessions": [
    "api:a3f9c2e8b1d4",
    "user:alice:project-planning",
    "telegram:123456789",
    "cli:default"
  ],
  "count": 4
}
```

### Python Example

```python
import httpx

url = "http://127.0.0.1:8080/api/v1/sessions"
headers = {"Authorization": f"Bearer {token}"}

response = httpx.get(url, headers=headers)
data = response.json()

print(f"Found {data['count']} sessions:")
for session_key in data['sessions']:
    print(f"  - {session_key}")
```

## GET /api/v1/sessions/{key}

Get detailed information about a specific session.

### Request

```bash
curl -X GET http://127.0.0.1:8080/api/v1/sessions/user:alice:project-planning \
  -H "Authorization: Bearer YOUR_TOKEN"
```

<ParamField path="key" type="string" required>
  The session key (URL path parameter). Can contain slashes, colons, and special characters.
</ParamField>

<Note>
Session keys can contain special characters like colons and slashes. URL-encode keys if they contain spaces or other reserved characters.
</Note>

### Response

<ResponseField name="key" type="string">
  The session key.
</ResponseField>

<ResponseField name="message_count" type="integer">
  Total number of messages (user + assistant) in the session.
</ResponseField>

<ResponseField name="created_at" type="number">
  Unix timestamp (seconds since epoch) when the session was created.
</ResponseField>

<ResponseField name="updated_at" type="number">
  Unix timestamp when the session was last updated.
</ResponseField>

<ResponseField name="age_seconds" type="number">
  Time in seconds since the session was created (rounded to 1 decimal place).
</ResponseField>

### Example Response

```json
{
  "key": "user:alice:project-planning",
  "message_count": 18,
  "created_at": 1709125200.5,
  "updated_at": 1709128800.3,
  "age_seconds": 3599.5
}
```

### Python Example

```python
import httpx
from datetime import datetime

url = "http://127.0.0.1:8080/api/v1/sessions/user:alice:project-planning"
headers = {"Authorization": f"Bearer {token}"}

response = httpx.get(url, headers=headers)
data = response.json()

print(f"Session: {data['key']}")
print(f"Messages: {data['message_count']}")
print(f"Created: {datetime.fromtimestamp(data['created_at'])}")
print(f"Age: {data['age_seconds'] / 3600:.1f} hours")
```

### Error Responses

**404 Not Found** - Session does not exist:

```json
{
  "detail": "Session not found"
}
```

## DELETE /api/v1/sessions/{key}

Delete a session by key. This permanently removes the session file and all conversation history.

### Request

```bash
curl -X DELETE http://127.0.0.1:8080/api/v1/sessions/api:a3f9c2e8b1d4 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

<ParamField path="key" type="string" required>
  The session key to delete (URL path parameter).
</ParamField>

<Warning>
Deletion is permanent and cannot be undone. The session file is removed from disk immediately.
</Warning>

### Response

<ResponseField name="deleted" type="boolean">
  Always `true` on successful deletion.
</ResponseField>

<ResponseField name="key" type="string">
  The session key that was deleted.
</ResponseField>

### Example Response

```json
{
  "deleted": true,
  "key": "api:a3f9c2e8b1d4"
}
```

### Python Example

```python
import httpx

url = "http://127.0.0.1:8080/api/v1/sessions/api:a3f9c2e8b1d4"
headers = {"Authorization": f"Bearer {token}"}

response = httpx.delete(url, headers=headers)
data = response.json()

if data['deleted']:
    print(f"Successfully deleted session: {data['key']}")
```

### Error Responses

**404 Not Found** - Session does not exist:

```json
{
  "detail": "Session not found"
}
```

## Session File Structure

Sessions are stored as JSON files in `<workspace>/sessions/`:

```
~/.grip/workspace/sessions/
  ├── api:a3f9c2e8b1d4.json
  ├── user:alice:project-planning.json
  └── cli:default.json
```

Each session file contains:

```json
{
  "key": "user:alice:project-planning",
  "messages": [
    {
      "role": "user",
      "content": "Create a new feature branch",
      "timestamp": 1709125200.5
    },
    {
      "role": "assistant",
      "content": "I'll create a new feature branch...",
      "timestamp": 1709125202.1
    }
  ],
  "created_at": 1709125200.5,
  "updated_at": 1709128800.3
}
```

## Session Key Formats

Session keys follow different patterns depending on the source:

| Source | Format | Example |
|--------|--------|----------|
| API (auto) | `api:<12-hex>` | `api:a3f9c2e8b1d4` |
| API (custom) | User-defined | `user:alice:project-planning` |
| CLI | `cli:default` | `cli:default` |
| Telegram | `telegram:<user-id>` | `telegram:123456789` |
| Discord | `discord:<user-id>` | `discord:987654321` |
| Slack | `slack:<user-id>` | `slack:U01234ABCDE` |

Custom keys must match regex `^[\w:.@-]+$` (max 128 characters).

## Bulk Operations

### Delete Multiple Sessions

No bulk delete endpoint exists. To delete multiple sessions, iterate:

```python
import httpx

base_url = "http://127.0.0.1:8080"
headers = {"Authorization": f"Bearer {token}"}

# Get all sessions
response = httpx.get(f"{base_url}/api/v1/sessions", headers=headers)
sessions = response.json()["sessions"]

# Delete sessions starting with "api:"
for key in sessions:
    if key.startswith("api:"):
        httpx.delete(f"{base_url}/api/v1/sessions/{key}", headers=headers)
        print(f"Deleted {key}")
```

### Export Session Data

To export conversation history, read the session files directly:

```python
import json
from pathlib import Path

workspace = Path.home() / ".grip" / "workspace"
sessions_dir = workspace / "sessions"

for session_file in sessions_dir.glob("*.json"):
    data = json.loads(session_file.read_text())
    print(f"\n=== {data['key']} ===")
    print(f"Messages: {len(data['messages'])}")
    for msg in data['messages']:
        print(f"  {msg['role']}: {msg['content'][:50]}...")
```

## Rate Limiting

All session endpoints are subject to standard rate limits:
- **Per-IP**: 60 requests/min
- **Per-token**: 60 requests/min

See [Overview - Rate Limits](/api/overview#rate-limits).

## Best Practices

<AccordionGroup>
  <Accordion title="Use descriptive session keys">
    Custom keys like `user:alice:project-planning` are easier to manage than auto-generated keys like `api:a3f9c2e8b1d4`.
  </Accordion>
  
  <Accordion title="Clean up old sessions periodically">
    List sessions, filter by age or prefix, and delete unused ones to save disk space.
  </Accordion>
  
  <Accordion title="Back up important sessions">
    Copy session JSON files before deletion or server migration. They're stored in `<workspace>/sessions/`.
  </Accordion>
  
  <Accordion title="Monitor session count">
    Use the list endpoint to track total sessions. Set up alerts if the count grows unexpectedly.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Chat API" icon="comments" href="/api/chat">
    Create and manage sessions through chat
  </Card>
  <Card title="Management API" icon="gear" href="/api/management">
    View system status and metrics
  </Card>
</CardGroup>